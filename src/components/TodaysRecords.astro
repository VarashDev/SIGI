<div id="records-container">
  <table class="min-w-full border-collapse border border-gray-300">
    <thead>
      <tr class="bg-gray-100">
        <th class="w-28 px-2 py-2 border border-gray-300 text-left">Time</th>
        <th class="px-2 py-2 border border-gray-300 text-left">Reason</th>
      </tr>
    </thead>
    <tbody id="records-body"></tbody>
  </table>
</div>

<script>
  async function loadRecords() {
    const res = await fetch("/api/todays-records");
    const records = await res.json();

    const tbody = document.getElementById("records-body");
    tbody.innerHTML = "";

    records.forEach((r, i) => {
      const tr = document.createElement("tr");
      tr.className = i % 2 === 0 ? "bg-white" : "bg-gray-50";

      const tdTime = document.createElement("td");
      tdTime.className = "px-2 py-2 border border-gray-300";
      tdTime.textContent = new Date(r.recorded).toLocaleTimeString("uk-UA", {
        timeZone: "Europe/Kyiv",
        timeStyle: "short",
      });

      const tdReason = document.createElement("td");
      tdReason.className = "px-2 py-2 border border-gray-300";
      tdReason.textContent = r.reason;

      tr.appendChild(tdTime);
      tr.appendChild(tdReason);
      tbody.appendChild(tr);
    });
  }

  // âœ… Run on load
  document.addEventListener("DOMContentLoaded", loadRecords);
</script>
